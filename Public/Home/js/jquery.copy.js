(function(b){b.fn.zclip=function(d){if(typeof d=="object"&&!d.length){var a=b.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:true,setHandCursor:true,setCSSEffects:true},d);return this.each(function(){var f=b(this);if(f.is(":visible")&&(typeof a.copy=="string"||b.isFunction(a.copy))){ZeroClipboard.setMoviePath(a.path);var c=new ZeroClipboard.Client();if(b.isFunction(a.copy)){f.bind("zClip_copy",a.copy)}if(b.isFunction(a.beforeCopy)){f.bind("zClip_beforeCopy",a.beforeCopy)}if(b.isFunction(a.afterCopy)){f.bind("zClip_afterCopy",a.afterCopy)}c.setHandCursor(a.setHandCursor);c.setCSSEffects(a.setCSSEffects);c.addEventListener("mouseOver",function(e){f.trigger("mouseenter")});c.addEventListener("mouseOut",function(e){f.trigger("mouseleave")});c.addEventListener("mouseDown",function(e){f.trigger("mousedown");if(!b.isFunction(a.copy)){c.setText(a.copy)}else{c.setText(f.triggerHandler("zClip_copy"))}if(b.isFunction(a.beforeCopy)){f.trigger("zClip_beforeCopy")}});c.addEventListener("complete",function(e,h){if(b.isFunction(a.afterCopy)){f.trigger("zClip_afterCopy")}else{if(h.length>500){h=h.substr(0,500)+"...\n\n("+(h.length-500)+" characters not shown)"}f.removeClass("hover");alert("复制成功: "+h)}if(a.clickAfter){f.trigger("click")}});c.glue(f[0],f.parent()[0]);b(window).bind("load resize",function(){c.reposition()})}})}else{if(typeof d=="string"){return this.each(function(){var h=b(this);d=d.toLowerCase();var g=h.data("zclipId");var c=b("#"+g+".zclip");if(d=="remove"){c.remove();h.removeClass("active hover")}else{if(d=="hide"){c.hide();h.removeClass("active hover")}else{if(d=="show"){c.show()}}}})}}}})(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(b){if(typeof(b)=="string"){b=document.getElementById(b)}if(!b.addClass){b.hide=function(){this.style.display="none"};b.show=function(){this.style.display=""};b.addClass=function(a){this.removeClass(a);this.className+=" "+a};b.removeClass=function(g){var h=this.className.split(/\s+/);var a=-1;for(var f=0;f<h.length;f++){if(h[f]==g){a=f;f=h.length}}if(a>-1){h.splice(a,1);this.className=h.join(" ")}return this};b.hasClass=function(a){return !!this.className.match(new RegExp("\\s*"+a+"\\s*"))}}return b},setMoviePath:function(b){this.moviePath=b},dispatch:function(h,f,g){var e=this.clients[h];if(e){e.receiveEvent(f,g)}},register:function(d,c){this.clients[d]=c},getDOMObjectPosition:function(f,d){var e={left:0,top:0,width:f.width?f.width:f.offsetWidth,height:f.height?f.height:f.offsetHeight};if(f&&(f!=d)){e.left+=f.offsetLeft;e.top+=f.offsetTop}return e},Client:function(b){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId="ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);if(b){this.glue(b)}}};ZeroClipboard.Client.prototype={id:0,ready:false,movie:null,clipText:"",handCursorEnabled:true,cssEffects:true,handlers:null,glue:function(j,h,k){this.domElement=ZeroClipboard.$(j);var l=99;if(this.domElement.style.zIndex){l=parseInt(this.domElement.style.zIndex,10)+1}if(typeof(h)=="string"){h=ZeroClipboard.$(h)}else{if(typeof(h)=="undefined"){h=document.getElementsByTagName("body")[0]}}var i=ZeroClipboard.getDOMObjectPosition(this.domElement,h);this.div=document.createElement("div");this.div.className="zclip";this.div.id="zclip-"+this.movieId;$(this.domElement).data("zclipId","zclip-"+this.movieId);var g=this.div.style;g.position="absolute";g.left=""+i.left+"px";g.top=""+i.top+"px";g.width=""+i.width+"px";g.height=""+i.height+"px";g.zIndex=l;if(typeof(k)=="object"){for(addedStyle in k){g[addedStyle]=k[addedStyle]}}h.appendChild(this.div);this.div.innerHTML=this.getHTML(i.width,i.height)},getHTML:function(i,f){var h="";var g="id="+this.id+"&width="+i+"&height="+f;if(navigator.userAgent.match(/MSIE/)){var j=location.href.match(/^https/i)?"https://":"http://";h+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+j+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+i+'" height="'+f+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+g+'"/><param name="wmode" value="transparent"/></object>'}else{h+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+i+'" height="'+f+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+g+'" wmode="transparent" />'}return h},hide:function(){if(this.div){this.div.style.left="-2000px"}},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var c=document.getElementsByTagName("body")[0];try{c.removeChild(this.div)}catch(d){}this.domElement=null;this.div=null}},reposition:function(f){if(f){this.domElement=ZeroClipboard.$(f);if(!this.domElement){this.hide()}}if(this.domElement&&this.div){var e=ZeroClipboard.getDOMObjectPosition(this.domElement);var d=this.div.style;d.left=""+e.left+"px";d.top=""+e.top+"px"}},setText:function(b){this.clipText=b;if(this.ready){this.movie.setText(b)}},addEventListener:function(c,d){c=c.toString().toLowerCase().replace(/^on/,"");if(!this.handlers[c]){this.handlers[c]=[]}this.handlers[c].push(d)},setHandCursor:function(b){this.handCursorEnabled=b;if(this.ready){this.movie.setHandCursor(b)}},setCSSEffects:function(b){this.cssEffects=!!b},receiveEvent:function(k,l){k=k.toString().toLowerCase().replace(/^on/,"");switch(k){case"load":this.movie=document.getElementById(this.movieId);if(!this.movie){var j=this;setTimeout(function(){j.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var j=this;setTimeout(function(){j.receiveEvent("load",null)},100);this.ready=true;return}this.ready=true;try{this.movie.setText(this.clipText)}catch(n){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(n){}break;case"mouseover":if(this.domElement&&this.cssEffects){this.domElement.addClass("hover");if(this.recoverActive){this.domElement.addClass("active")}}break;case"mouseout":if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass("active")){this.domElement.removeClass("active");this.recoverActive=true}this.domElement.removeClass("hover")}break;case"mousedown":if(this.domElement&&this.cssEffects){this.domElement.addClass("active")}break;case"mouseup":if(this.domElement&&this.cssEffects){this.domElement.removeClass("active");this.recoverActive=false}break}if(this.handlers[k]){for(var i=0,e=this.handlers[k].length;i<e;i++){var m=this.handlers[k][i];if(typeof(m)=="function"){m(this,l)}else{if((typeof(m)=="object")&&(m.length==2)){m[0][m[1]](this,l)}else{if(typeof(m)=="string"){window[m](this,l)}}}}}}};