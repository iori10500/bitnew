(function(){var c,k,f,h,d=[].slice,j={}.hasOwnProperty,g=function(a,o){function m(){this.constructor=a}for(var i in o){j.call(o,i)&&(a[i]=o[i])}return m.prototype=o.prototype,a.prototype=new m,a.__super__=o.prototype,a},l=function(a,i){return function(){return a.apply(i,arguments)}},b=[].indexOf||function(a){for(var m=0,i=this.length;m<i;m++){if(m in this&&this[m]===a){return m}}return -1};k=window.Morris={},c=jQuery,k.EventEmitter=function(){function a(){}return a.prototype.on=function(i,m){return this.handlers==null&&(this.handlers={}),this.handlers[i]==null&&(this.handlers[i]=[]),this.handlers[i].push(m),this},a.prototype.fire=function(){var i,w,m,q,v,p,x;m=arguments[0],i=2<=arguments.length?d.call(arguments,1):[];if(this.handlers!=null&&this.handlers[m]!=null){p=this.handlers[m],x=[];for(q=0,v=p.length;q<v;q++){w=p[q],x.push(w.apply(null,i))}return x}},a}(),k.commas=function(a){var q,o,p,m;return a!=null?(p=a<0?"-":"",q=Math.abs(a),o=Math.floor(q).toFixed(0),p+=o.replace(/(?=(?:\d{3})+$)(?!^)/g,","),m=q.toString(),m.length>o.length&&(p+=m.slice(o.length)),p):"-"},k.pad2=function(a){return(a<10?"0":"")+a},k.Grid=function(a){function e(m){var i=this;typeof m.element=="string"?this.el=c(document.getElementById(m.element)):this.el=c(m.element);if(this.el==null||this.el.length===0){throw new Error("Graph container element not found")}this.el.css("position")==="static"&&this.el.css("position","relative"),this.options=c.extend({},this.gridDefaults,this.defaults||{},m),typeof this.options.units=="string"&&(this.options.postUnits=m.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(n){var o;return o=i.el.offset(),i.fire("hovermove",n.pageX-o.left,n.pageY-o.top)}),this.el.bind("mouseout",function(n){return i.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(n){var p,o;return o=n.originalEvent.touches[0]||n.originalEvent.changedTouches[0],p=i.el.offset(),i.fire("hover",o.pageX-p.left,o.pageY-p.top),o}),this.el.bind("click",function(n){var o;return o=i.el.offset(),i.fire("gridclick",n.pageX-o.left,n.pageY-o.top)}),this.postInit&&this.postInit()}return g(e,a),e.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:0.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"]},e.prototype.setData=function(x,D){var G,A,H,E,I,q,y,B,t,z,F,w,J,C;D==null&&(D=!0),this.options.data=x;if(x==null||x.length===0){this.data=[],this.raphael.clear(),this.hover!=null&&this.hover.hide();return}w=this.cumulative?0:null,J=this.cumulative?0:null,this.options.goals.length>0&&(I=Math.min.apply(null,this.options.goals),E=Math.max.apply(null,this.options.goals),J=J!=null?Math.min(J,I):I,w=w!=null?Math.max(w,E):E),this.data=function(){var i,p,m;m=[];for(H=i=0,p=x.length;i<p;H=++i){y=x[H],q={},q.label=y[this.options.xkey],this.options.parseTime?(q.x=k.parseDate(q.label),this.options.dateFormat?q.label=this.options.dateFormat(q.x):typeof q.label=="number"&&(q.label=(new Date(q.label)).toString())):(q.x=H,this.options.xLabelFormat&&(q.label=this.options.xLabelFormat(q))),t=0,q.y=function(){var o,v,s,u;s=this.options.ykeys,u=[];for(A=o=0,v=s.length;o<v;A=++o){F=s[A],C=y[F],typeof C=="string"&&(C=parseFloat(C)),C!=null&&typeof C!="number"&&(C=null),C!=null&&(this.cumulative?t+=C:w!=null?(w=Math.max(C,w),J=Math.min(C,J)):w=J=C),this.cumulative&&t!=null&&(w=Math.max(t,w),J=Math.min(t,J)),u.push(C)}return u}.call(this),m.push(q)}return m}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(i,m){return(i.x>m.x)-(m.x>i.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.parseTime&&this.options.events.length>0&&(this.events=function(){var m,p,o,r;o=this.options.events,r=[];for(m=0,p=o.length;m<p;m++){G=o[m],r.push(k.parseDate(G))}return r}.call(this),this.xmax=Math.max(this.xmax,Math.max.apply(null,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(null,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",J),this.ymax=this.yboundary("max",w),this.ymin===this.ymax&&(J&&(this.ymin-=1),this.ymax+=1);if(this.options.axes===!0||this.options.grid===!0){this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(B=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var i,p,m,o;o=[];for(z=i=p=this.ymin,m=this.ymax;p<=m?i<=m:i>=m;z=i+=B){o.push(z)}return o}.call(this))}this.dirty=!0;if(D){return this.redraw()}},e.prototype.yboundary=function(i,p){var m,o;return m=this.options["y"+i],typeof m=="string"?m.slice(0,4)==="auto"?m.length>5?(o=parseInt(m.slice(5),10),p==null?o:Math[i](p,o)):p!=null?p:0:parseInt(m,10):m},e.prototype.autoGridLines=function(q,C,y){var A,w,B,z,D,m,v,x,p;return D=C-q,p=Math.floor(Math.log(D)/Math.log(10)),v=Math.pow(10,p),w=Math.floor(q/v)*v,A=Math.ceil(C/v)*v,m=(A-w)/(y-1),v===1&&m>1&&Math.ceil(m)!==m&&(m=Math.ceil(m),A=w+m*(y-1)),w<0&&A>0&&(w=Math.floor(q/m)*m,A=Math.ceil(C/m)*m),m<1?(z=Math.floor(Math.log(m)/Math.log(10)),B=function(){var i,n;n=[];for(x=i=w;w<=A?i<=A:i>=A;x=i+=m){n.push(parseFloat(x.toFixed(1-z)))}return n}()):B=function(){var i,n;n=[];for(x=i=w;w<=A?i<=A:i>=A;x=i+=m){n.push(x)}return n}(),B},e.prototype._calc=function(){var m,v,p,q,o,u;o=this.el.width(),p=this.el.height();if(this.elementWidth!==o||this.elementHeight!==p||this.dirty){this.elementWidth=o,this.elementHeight=p,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,this.options.axes&&(u=function(){var s,w,x,t;x=this.grid,t=[];for(s=0,w=x.length;s<w;s++){v=x[s],t.push(this.measureText(this.yAxisFormat(v)).width)}return t}.call(this),this.left+=Math.max.apply(Math,u),m=function(){var i,s,r;r=[];for(q=i=0,s=this.data.length;0<=s?i<s:i>s;q=0<=s?++i:--i){r.push(this.measureText(this.data[q].text,-this.options.xLabelAngle).height)}return r}.call(this),this.bottom-=Math.max.apply(Math,m)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin);if(this.calc){return this.calc()}}},e.prototype.transY=function(i){return this.bottom-(i-this.ymin)*this.dy},e.prototype.transX=function(i){return this.data.length===1?(this.left+this.right)/2:this.left+(i-this.xmin)*this.dx},e.prototype.redraw=function(){this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents();if(this.draw){return this.draw()}},e.prototype.measureText=function(i,p){var m,o;return p==null&&(p=0),o=this.raphael.text(100,100,i).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(p),m=o.getBBox(),o.remove(),m},e.prototype.yAxisFormat=function(i){return this.yLabelFormat(i)},e.prototype.yLabelFormat=function(i){return typeof this.options.yLabelFormat=="function"?this.options.yLabelFormat(i):""+this.options.preUnits+k.commas(i)+this.options.postUnits},e.prototype.updateHover=function(i,p){var m,o;m=this.hitTest(i,p);if(m!=null){return(o=this.hover).update.apply(o,m)}},e.prototype.drawGrid=function(){var m,v,p,q,o,u;if(this.options.grid===!1&&this.options.axes===!1){return}o=this.grid,u=[];for(p=0,q=o.length;p<q;p++){m=o[p],v=this.transY(m),this.options.axes&&this.drawYAxisLabel(this.left-this.options.padding/2,v,this.yAxisFormat(m)),this.options.grid?u.push(this.drawGridLine("M"+this.left+","+v+"H"+(this.left+this.width))):u.push(void 0)}return u},e.prototype.drawGoals=function(){var m,x,q,v,p,w,u;w=this.options.goals,u=[];for(q=v=0,p=w.length;v<p;q=++v){x=w[q],m=this.options.goalLineColors[q%this.options.goalLineColors.length],u.push(this.drawGoal(x,m))}return u},e.prototype.drawEvents=function(){var m,x,q,v,p,w,u;w=this.events,u=[];for(q=v=0,p=w.length;v<p;q=++v){x=w[q],m=this.options.eventLineColors[q%this.options.eventLineColors.length],u.push(this.drawEvent(x,m))}return u},e.prototype.drawGoal=function(i,m){return this.raphael.path("M"+this.left+","+this.transY(i)+"H"+this.right).attr("stroke",m).attr("stroke-width",this.options.goalStrokeWidth)},e.prototype.drawEvent=function(i,m){return this.raphael.path("M"+this.transX(i)+","+this.bottom+"V"+this.top).attr("stroke",m).attr("stroke-width",this.options.eventStrokeWidth)},e.prototype.drawYAxisLabel=function(i,o,m){return this.raphael.text(i,o,m).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},e.prototype.drawGridLine=function(i){return this.raphael.path(i).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},e}(k.EventEmitter),k.parseDate=function(q){var C,y,A,w,B,z,D,m,v,x,p;return typeof q=="number"?q:(y=q.match(/^(\d+) Q(\d)$/),w=q.match(/^(\d+)-(\d+)$/),B=q.match(/^(\d+)-(\d+)-(\d+)$/),D=q.match(/^(\d+) W(\d+)$/),m=q.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),v=q.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),y?(new Date(parseInt(y[1],10),parseInt(y[2],10)*3-1,1)).getTime():w?(new Date(parseInt(w[1],10),parseInt(w[2],10)-1,1)).getTime():B?(new Date(parseInt(B[1],10),parseInt(B[2],10)-1,parseInt(B[3],10))).getTime():D?(x=new Date(parseInt(D[1],10),0,1),x.getDay()!==4&&x.setMonth(0,1+(4-x.getDay()+7)%7),x.getTime()+parseInt(D[2],10)*604800000):m?m[6]?(z=0,m[6]!=="Z"&&(z=parseInt(m[8],10)*60+parseInt(m[9],10),m[7]==="+"&&(z=0-z)),Date.UTC(parseInt(m[1],10),parseInt(m[2],10)-1,parseInt(m[3],10),parseInt(m[4],10),parseInt(m[5],10)+z)):(new Date(parseInt(m[1],10),parseInt(m[2],10)-1,parseInt(m[3],10),parseInt(m[4],10),parseInt(m[5],10))).getTime():v?(p=parseFloat(v[6]),C=Math.floor(p),A=Math.round((p-C)*1000),v[8]?(z=0,v[8]!=="Z"&&(z=parseInt(v[10],10)*60+parseInt(v[11],10),v[9]==="+"&&(z=0-z)),Date.UTC(parseInt(v[1],10),parseInt(v[2],10)-1,parseInt(v[3],10),parseInt(v[4],10),parseInt(v[5],10)+z,C,A)):(new Date(parseInt(v[1],10),parseInt(v[2],10)-1,parseInt(v[3],10),parseInt(v[4],10),parseInt(v[5],10),C,A)).getTime()):(new Date(parseInt(q,10),0,1)).getTime())},k.Hover=function(){function a(e){e==null&&(e={}),this.options=c.extend({},k.Hover.defaults,e),this.el=c("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return a.defaults={"class":"morris-hover morris-default-style"},a.prototype.update=function(i,o,m){return this.html(i),this.show(),this.moveTo(o,m)},a.prototype.html=function(i){return this.el.html(i)},a.prototype.moveTo=function(m,y){var q,w,p,x,v,z;return v=this.options.parent.innerWidth(),x=this.options.parent.innerHeight(),w=this.el.outerWidth(),q=this.el.outerHeight(),p=Math.min(Math.max(0,m-w/2),v-w),y!=null?(z=y-q-10,z<0&&(z=y+10,z+q>x&&(z=x/2-q/2))):z=x/2-q/2,this.el.css({left:p+"px",top:parseInt(z)+"px"})},a.prototype.show=function(){return this.el.show()},a.prototype.hide=function(){return this.el.hide()},a}(),k.Line=function(a){function i(m){this.hilight=l(this.hilight,this),this.onHoverOut=l(this.onHoverOut,this),this.onHoverMove=l(this.onHoverMove,this),this.onGridClick=l(this.onGridClick,this);if(!(this instanceof k.Line)){return new k.Line(m)}i.__super__.constructor.call(this,m)}return g(i,a),i.prototype.init=function(){this.pointGrow=Raphael.animation({r:this.options.pointSize+3},25,"linear"),this.pointShrink=Raphael.animation({r:this.options.pointSize},25,"linear");if(this.options.hideHover!=="always"){return this.hover=new k.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)}},i.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,continuousLine:!0,hideHover:!1},i.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},i.prototype.calcPoints=function(){var m,v,p,q,o,u;o=this.data,u=[];for(p=0,q=o.length;p<q;p++){m=o[p],m._x=this.transX(m.x),m._y=function(){var t,w,e,x;e=m.y,x=[];for(t=0,w=e.length;t<w;t++){v=e[t],v!=null?x.push(this.transY(v)):x.push(v)}return x}.call(this),u.push(m._ymax=Math.min.apply(null,[this.bottom].concat(function(){var t,w,e,x;e=m._y,x=[];for(t=0,w=e.length;t<w;t++){v=e[t],v!=null&&x.push(v)}return x}())))}return u},i.prototype.hitTest=function(m,x){var q,v,p,w,u;if(this.data.length===0){return null}u=this.data.slice(1);for(q=p=0,w=u.length;p<w;q=++p){v=u[q];if(m<(v._x+this.data[q]._x)/2){break}}return q},i.prototype.onGridClick=function(m,p){var o;return o=this.hitTest(m,p),this.fire("click",o,this.options.data[o],m,p)},i.prototype.onHoverMove=function(m,p){var o;return o=this.hitTest(m,p),this.displayHoverForRow(o)},i.prototype.onHoverOut=function(){if(this.options.hideHover!==!1){return this.displayHoverForRow(null)}},i.prototype.displayHoverForRow=function(m){var n;return m!=null?((n=this.hover).update.apply(n,this.hoverContentForRow(m)),this.hilight(m)):(this.hover.hide(),this.hilight())},i.prototype.hoverContentForRow=function(m){var y,q,w,p,x,v,z;w=this.data[m],y="<div class='morris-hover-row-label'>"+w.label+"</div>",z=w.y;for(q=x=0,v=z.length;x<v;q=++x){p=z[q],y+="<div class='morris-hover-point' style='color: "+this.colorFor(w,q,"label")+"'>\n  "+this.options.labels[q]+":\n  "+this.yLabelFormat(p)+"\n</div>"}return typeof this.options.hoverCallback=="function"&&(y=this.options.hoverCallback(m,this.options,y)),[y,w._x,w._ymax]},i.prototype.generatePaths=function(){var m,p,q,o,t;return this.paths=function(){var r,s,e,n;n=[];for(q=r=0,s=this.options.ykeys.length;0<=s?r<s:r>s;q=0<=s?++r:--r){t=this.options.smooth===!0||(e=this.options.ykeys[q],b.call(this.options.smooth,e)>=0),p=function(){var u,x,v,w;v=this.data,w=[];for(u=0,x=v.length;u<x;u++){o=v[u],o._y[q]!==void 0&&w.push({x:o._x,y:o._y[q]})}return w}.call(this),this.options.continuousLine&&(p=function(){var w,v,u;u=[];for(w=0,v=p.length;w<v;w++){m=p[w],m.y!==null&&u.push(m)}return u}()),p.length>1?n.push(k.Line.createPath(p,t,this.bottom)):n.push(null)}return n}.call(this)},i.prototype.draw=function(){this.options.axes&&this.drawXAxis(),this.drawSeries();if(this.options.hideHover===!1){return this.displayHoverForRow(this.data.length-1)}},i.prototype.drawXAxis=function(){var q,x,z,v,A,y,B,m,t,w,p=this;B=this.bottom+this.options.padding/2,A=null,v=null,q=function(u,G){var D,F,E,s,C;return D=p.drawXAxisLabel(p.transX(G),B,u),C=D.getBBox(),D.transform("r"+-p.options.xLabelAngle),F=D.getBBox(),D.transform("t0,"+F.height/2+"..."),p.options.xLabelAngle!==0&&(s=-0.5*C.width*Math.cos(p.options.xLabelAngle*Math.PI/180),D.transform("t"+s+",0...")),F=D.getBBox(),(A==null||A>=F.x+F.width||v!=null&&v>=F.x)&&F.x>=0&&F.x+F.width<p.el.width()?(p.options.xLabelAngle!==0&&(E=1.25*p.options.gridTextSize/Math.sin(p.options.xLabelAngle*Math.PI/180),v=F.x-E),A=F.x-p.options.xLabelMargin):D.remove()},this.options.parseTime?this.data.length===1&&this.options.xLabels==="auto"?z=[[this.data[0].label,this.data[0].x]]:z=k.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):z=function(){var o,C,s,u;s=this.data,u=[];for(o=0,C=s.length;o<C;o++){y=s[o],u.push([y.label,y.x])}return u}.call(this),z.reverse(),w=[];for(m=0,t=z.length;m<t;m++){x=z[m],w.push(q(x[0],x[1]))}return w},i.prototype.drawSeries=function(){var m,v,p,q,o,u;this.seriesPoints=[];for(m=v=q=this.options.ykeys.length-1;q<=0?v<=0:v>=0;m=q<=0?++v:--v){this._drawLineFor(m)}u=[];for(m=p=o=this.options.ykeys.length-1;o<=0?p<=0:p>=0;m=o<=0?++p:--p){u.push(this._drawPointFor(m))}return u},i.prototype._drawPointFor=function(m){var x,q,v,p,w,u;this.seriesPoints[m]=[],w=this.data,u=[];for(v=0,p=w.length;v<p;v++){q=w[v],x=null,q._y[m]!=null&&(x=this.drawLinePoint(q._x,q._y[m],this.options.pointSize,this.colorFor(q,m,"point"),m)),u.push(this.seriesPoints[m].push(x))}return u},i.prototype._drawLineFor=function(m){var n;n=this.paths[m];if(n!==null){return this.drawLinePath(n,this.colorFor(null,m,"line"))}},i.createPath=function(x,E,H){var B,I,F,J,q,y,C,t,A,G,w,K,D,z;C="",E&&(F=k.Line.gradients(x)),t={y:null};for(J=D=0,z=x.length;D<z;J=++D){B=x[J];if(B.y!=null){if(t.y!=null){E?(I=F[J],y=F[J-1],q=(B.x-t.x)/4,A=t.x+q,w=Math.min(H,t.y+q*y),G=B.x-q,K=Math.min(H,B.y-q*I),C+="C"+A+","+w+","+G+","+K+","+B.x+","+B.y):C+="L"+B.x+","+B.y}else{if(!E||F[J]!=null){C+="M"+B.x+","+B.y}}}t=B}return C},i.gradients=function(p){var z,v,x,q,y,w,A,m;v=function(n,o){return(n.y-o.y)/(n.x-o.x)},m=[];for(x=w=0,A=p.length;w<A;x=++w){z=p[x],z.y!=null?(q=p[x+1]||{y:null},y=p[x-1]||{y:null},y.y!=null&&q.y!=null?m.push(v(y,q)):y.y!=null?m.push(v(y,z)):q.y!=null?m.push(v(z,q)):m.push(null)):m.push(null)}return m},i.prototype.hilight=function(m){var v,p,q,o,u;if(this.prevHilight!==null&&this.prevHilight!==m){for(v=p=0,o=this.seriesPoints.length-1;0<=o?p<=o:p>=o;v=0<=o?++p:--p){this.seriesPoints[v][this.prevHilight]&&this.seriesPoints[v][this.prevHilight].animate(this.pointShrink)}}if(m!==null&&this.prevHilight!==m){for(v=q=0,u=this.seriesPoints.length-1;0<=u?q<=u:q>=u;v=0<=u?++q:--q){this.seriesPoints[v][m]&&this.seriesPoints[v][m].animate(this.pointGrow)}}return this.prevHilight=m},i.prototype.colorFor=function(m,p,o){return typeof this.options.lineColors=="function"?this.options.lineColors.call(this,m,p,o):o==="point"?this.options.pointFillColors[p%this.options.pointFillColors.length]||this.options.lineColors[p%this.options.lineColors.length]:this.options.lineColors[p%this.options.lineColors.length]},i.prototype.drawXAxisLabel=function(m,p,o){return this.raphael.text(m,p,o).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},i.prototype.drawLinePath=function(m,n){return this.raphael.path(m).attr("stroke",n).attr("stroke-width",this.options.lineWidth)},i.prototype.drawLinePoint=function(m,s,p,q,o){return this.raphael.circle(m,s,p).attr("fill",q).attr("stroke-width",this.strokeWidthForSeries(o)).attr("stroke",this.strokeForSeries(o))},i.prototype.strokeWidthForSeries=function(m){return this.options.pointWidths[m%this.options.pointWidths.length]},i.prototype.strokeForSeries=function(m){return this.options.pointStrokeColors[m%this.options.pointStrokeColors.length]},i}(k.Grid),k.labelSeries=function(C,F,z,G,D){var H,e,w,A,q,y,E,t,I,B,x;w=200*(F-C)/z,e=new Date(C),E=k.LABEL_SPECS[G];if(E===void 0){x=k.AUTO_LABEL_ORDER;for(I=0,B=x.length;I<B;I++){A=x[I],y=k.LABEL_SPECS[A];if(w>=y.span){E=y;break}}}E===void 0&&(E=k.LABEL_SPECS.second),D&&(E=c.extend({},E,{fmt:D})),H=E.start(e),q=[];while((t=H.getTime())<=F){t>=C&&q.push([E.fmt(H),t]),E.incr(H)}return q},f=function(a){return{span:a*60*1000,start:function(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours())},fmt:function(i){return""+k.pad2(i.getHours())+":"+k.pad2(i.getMinutes())},incr:function(e){return e.setUTCMinutes(e.getUTCMinutes()+a)}}},h=function(a){return{span:a*1000,start:function(i){return new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes())},fmt:function(i){return""+k.pad2(i.getHours())+":"+k.pad2(i.getMinutes())+":"+k.pad2(i.getSeconds())},incr:function(e){return e.setUTCSeconds(e.getUTCSeconds()+a)}}},k.LABEL_SPECS={decade:{span:172800000000,start:function(a){return new Date(a.getFullYear()-a.getFullYear()%10,0,1)},fmt:function(a){return""+a.getFullYear()},incr:function(a){return a.setFullYear(a.getFullYear()+10)}},year:{span:17280000000,start:function(a){return new Date(a.getFullYear(),0,1)},fmt:function(a){return""+a.getFullYear()},incr:function(a){return a.setFullYear(a.getFullYear()+1)}},month:{span:2419200000,start:function(a){return new Date(a.getFullYear(),a.getMonth(),1)},fmt:function(a){return""+a.getFullYear()+"-"+k.pad2(a.getMonth()+1)},incr:function(a){return a.setMonth(a.getMonth()+1)}},day:{span:86400000,start:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},fmt:function(a){return""+a.getFullYear()+"-"+k.pad2(a.getMonth()+1)+"-"+k.pad2(a.getDate())},incr:function(a){return a.setDate(a.getDate()+1)}},hour:f(60),"30min":f(30),"15min":f(15),"10min":f(10),"5min":f(5),minute:f(1),"30sec":h(30),"15sec":h(15),"10sec":h(10),"5sec":h(5),second:h(1)},k.AUTO_LABEL_ORDER=["decade","year","month","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],k.Area=function(e){function a(i){var o;if(!(this instanceof k.Area)){return new k.Area(i)}o=c.extend({},m,i),this.cumulative=!o.behaveLikeLine,o.fillOpacity==="auto"&&(o.fillOpacity=o.behaveLikeLine?0.8:1),a.__super__.constructor.call(this,o)}var m;return g(a,e),m={fillOpacity:"auto",behaveLikeLine:!1},a.prototype.calcPoints=function(){var p,y,u,w,q,x,v;x=this.data,v=[];for(w=0,q=x.length;w<q;w++){p=x[w],p._x=this.transX(p.x),y=0,p._y=function(){var z,n,A,t;A=p.y,t=[];for(z=0,n=A.length;z<n;z++){u=A[z],this.options.behaveLikeLine?t.push(this.transY(u)):(y+=u||0,t.push(this.transY(y)))}return t}.call(this),v.push(p._ymax=Math.max.apply(Math,p._y))}return v},a.prototype.drawSeries=function(){var q,C,y,A,w,B,z,D,p,v,x;this.seriesPoints=[],this.options.behaveLikeLine?C=function(){p=[];for(var i=0,n=this.options.ykeys.length-1;0<=n?i<=n:i>=n;0<=n?i++:i--){p.push(i)}return p}.apply(this):C=function(){v=[];for(var i=D=this.options.ykeys.length-1;D<=0?i<=0:i>=0;D<=0?i++:i--){v.push(i)}return v}.apply(this),x=[];for(w=0,B=C.length;w<B;w++){q=C[w],this._drawFillFor(q),this._drawLineFor(q),x.push(this._drawPointFor(q))}return x},a.prototype._drawFillFor=function(i){var n;n=this.paths[i];if(n!==null){return n+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(n,this.fillForSeries(i))}},a.prototype.fillForSeries=function(i){var n;return n=Raphael.rgb2hsl(this.colorFor(this.data[i],i,"line")),Raphael.hsl(n.h,this.options.behaveLikeLine?n.s*0.9:n.s*0.75,Math.min(0.98,this.options.behaveLikeLine?n.l*1.2:n.l*1.25))},a.prototype.drawFilledPath=function(i,n){return this.raphael.path(i).attr("fill",n).attr("fill-opacity",this.options.fillOpacity).attr("stroke-width",0)},a}(k.Line),k.Bar=function(a){function e(i){this.onHoverOut=l(this.onHoverOut,this),this.onHoverMove=l(this.onHoverMove,this),this.onGridClick=l(this.onGridClick,this);if(!(this instanceof k.Bar)){return new k.Bar(i)}e.__super__.constructor.call(this,c.extend({},i,{parseTime:!1}))}return g(e,a),e.prototype.init=function(){this.cumulative=this.options.stacked;if(this.options.hideHover!=="always"){return this.hover=new k.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)}},e.prototype.defaults={barSizeRatio:0.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],xLabelMargin:50},e.prototype.calc=function(){var i;this.calcBars();if(this.options.hideHover===!1){return(i=this.hover).update.apply(i,this.hoverContentForRow(this.data.length-1))}},e.prototype.calcBars=function(){var m,x,q,v,p,w,u;w=this.data,u=[];for(m=v=0,p=w.length;v<p;m=++v){x=w[m],x._x=this.left+this.width*(m+0.5)/this.data.length,u.push(x._y=function(){var n,t,o,y;o=x.y,y=[];for(n=0,t=o.length;n<t;n++){q=o[n],q!=null?y.push(this.transY(q)):y.push(null)}return y}.call(this))}return u},e.prototype.draw=function(){return this.options.axes&&this.drawXAxis(),this.drawSeries()},e.prototype.drawXAxis=function(){var q,D,z,B,x,C,A,E,m,v,y,p,w;v=this.bottom+this.options.padding/2,A=null,C=null,w=[];for(q=y=0,p=this.data.length;0<=p?y<p:y>p;q=0<=p?++y:--y){E=this.data[this.data.length-1-q],D=this.drawXAxisLabel(E._x,v,E.label),m=D.getBBox(),D.transform("r"+-this.options.xLabelAngle),z=D.getBBox(),D.transform("t0,"+z.height/2+"..."),this.options.xLabelAngle!==0&&(x=-0.5*m.width*Math.cos(this.options.xLabelAngle*Math.PI/180),D.transform("t"+x+",0...")),(A==null||A>=z.x+z.width||C!=null&&C>=z.x)&&z.x>=0&&z.x+z.width<this.el.width()?(this.options.xLabelAngle!==0&&(B=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),C=z.x-B),w.push(A=z.x-this.options.xLabelMargin)):w.push(D.remove())}return w},e.prototype.drawSeries=function(){var v,F,A,D,y,E,B,G,m,w,z,q,x,C;return A=this.width/this.options.data.length,G=this.options.stacked!=null?1:this.options.ykeys.length,v=(A*this.options.barSizeRatio-this.options.barGap*(G-1))/G,B=A*(1-this.options.barSizeRatio)/2,C=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var o,i,p,n;p=this.data,n=[];for(D=o=0,i=p.length;o<i;D=++o){m=p[D],y=0,n.push(function(){var t,r,H,s;H=m._y,s=[];for(w=t=0,r=H.length;t<r;w=++t){x=H[w],x!==null?(C?(q=Math.min(x,C),F=Math.max(x,C)):(q=x,F=this.bottom),E=this.left+D*A+B,this.options.stacked||(E+=w*(v+this.options.barGap)),z=F-q,this.options.stacked&&(q-=y),this.drawBar(E,q,v,z,this.colorFor(m,w,"bar")),s.push(y+=z)):s.push(null)}return s}.call(this))}return n}.call(this)},e.prototype.colorFor=function(m,s,p){var q,o;return typeof this.options.barColors=="function"?(q={x:m.x,y:m.y[s],label:m.label},o={index:s,key:this.options.ykeys[s],label:this.options.labels[s]},this.options.barColors.call(this,q,o,p)):this.options.barColors[s%this.options.barColors.length]},e.prototype.hitTest=function(i,m){return this.data.length===0?null:(i=Math.max(Math.min(i,this.right),this.left),Math.min(this.data.length-1,Math.floor((i-this.left)/(this.width/this.data.length))))},e.prototype.onGridClick=function(i,o){var m;return m=this.hitTest(i,o),this.fire("click",m,this.options.data[m],i,o)},e.prototype.onHoverMove=function(i,p){var m,o;return m=this.hitTest(i,p),(o=this.hover).update.apply(o,this.hoverContentForRow(m))},e.prototype.onHoverOut=function(){if(this.options.hideHover!==!1){return this.hover.hide()}},e.prototype.hoverContentForRow=function(p){var z,v,x,q,y,w,A,m;x=this.data[p],z="<div class='morris-hover-row-label'>"+x.label+"</div>",m=x.y;for(v=w=0,A=m.length;w<A;v=++w){y=m[v],z+="<div class='morris-hover-point' style='color: "+this.colorFor(x,v,"label")+"'>\n  "+this.options.labels[v]+":\n  "+this.yLabelFormat(y)+"\n</div>"}return typeof this.options.hoverCallback=="function"&&(z=this.options.hoverCallback(p,this.options,z)),q=this.left+(p+0.5)*this.width/this.data.length,[z,q]},e.prototype.drawXAxisLabel=function(i,p,m){var o;return o=this.raphael.text(i,p,m).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},e.prototype.drawBar=function(m,s,p,q,o){return this.raphael.rect(m,s,p,q).attr("fill",o).attr("stroke-width",0)},e}(k.Grid),k.Donut=function(a){function e(i){this.select=l(this.select,this),this.click=l(this.click,this);var m;if(!(this instanceof k.Donut)){return new k.Donut(i)}typeof i.element=="string"?this.el=c(document.getElementById(i.element)):this.el=c(i.element),this.options=c.extend({},this.defaults,i);if(this.el===null||this.el.length===0){throw new Error("Graph placeholder not found.")}if(i.data===void 0||i.data.length===0){return}this.data=i.data,this.values=function(){var o,r,q,p;q=this.data,p=[];for(o=0,r=q.length;o<r;o++){m=q[o],p.push(parseFloat(m.value))}return p}.call(this),this.redraw()}return g(e,a),e.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:k.commas},e.prototype.redraw=function(){var B,K,N,H,O,L,Q,q,D,I,z,G,M,A,R,J,F,V,t,T,C,P,U;this.el.empty(),this.raphael=new Raphael(this.el[0]),K=this.el.width()/2,N=this.el.height()/2,M=(Math.min(K,N)-10)/3,z=0,T=this.values;for(A=0,F=T.length;A<F;A++){G=T[A],z+=G}q=5/(2*M),B=1.9999*Math.PI-q*this.data.length,L=0,O=0,this.segments=[],C=this.values;for(H=R=0,V=C.length;R<V;H=++R){G=C[H],D=L+q+B*(G/z),I=new k.DonutSegment(K,N,M*2,M,L,D,this.options.colors[O%this.options.colors.length],this.options.backgroundColor,O,this.raphael),I.render(),this.segments.push(I),I.on("hover",this.select),I.on("click",this.click),L=D,O+=1}this.text1=this.drawEmptyDonutLabel(K,N-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(K,N+10,this.options.labelColor,14),Q=Math.max.apply(null,function(){var i,p,m,o;m=this.values,o=[];for(i=0,p=m.length;i<p;i++){G=m[i],o.push(G)}return o}.call(this)),O=0,P=this.values,U=[];for(J=0,t=P.length;J<t;J++){G=P[J];if(G===Q){this.select(O);break}U.push(O+=1)}return U},e.prototype.click=function(i){return this.fire("click",i,this.data[i])},e.prototype.select=function(m){var x,q,v,p,w,u;u=this.segments;for(p=0,w=u.length;p<w;p++){q=u[p],q.deselect()}return v=this.segments[m],v.select(),x=this.data[m],this.setLabels(x.label,this.options.formatter(x.value,x))},e.prototype.setLabels=function(p,A){var w,y,v,z,x,B,m,q;return w=(Math.min(this.el.width()/2,this.el.height()/2)-10)*2/3,z=1.8*w,v=w/2,y=w/3,this.text1.attr({text:p,transform:""}),x=this.text1.getBBox(),B=Math.min(z/x.width,v/x.height),this.text1.attr({transform:"S"+B+","+B+","+(x.x+x.width/2)+","+(x.y+x.height)}),this.text2.attr({text:A,transform:""}),m=this.text2.getBBox(),q=Math.min(z/m.width,y/m.height),this.text2.attr({transform:"S"+q+","+q+","+(m.x+m.width/2)+","+m.y})},e.prototype.drawEmptyDonutLabel=function(m,v,p,q,o){var u;return u=this.raphael.text(m,v,"").attr("font-size",q).attr("fill",p),o!=null&&u.attr("font-weight",o),u},e}(k.EventEmitter),k.DonutSegment=function(a){function i(p,A,w,y,u,z,x,m,q,v){this.cx=p,this.cy=A,this.inner=w,this.outer=y,this.color=x,this.backgroundColor=m,this.index=q,this.raphael=v,this.deselect=l(this.deselect,this),this.select=l(this.select,this),this.sin_p0=Math.sin(u),this.cos_p0=Math.cos(u),this.sin_p1=Math.sin(z),this.cos_p1=Math.cos(z),this.is_long=z-u>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return g(i,a),i.prototype.calcArcPoints=function(m){return[this.cx+m*this.sin_p0,this.cy+m*this.cos_p0,this.cx+m*this.sin_p1,this.cy+m*this.cos_p1]},i.prototype.calcSegment=function(q,C){var y,A,w,B,z,D,m,v,x,p;return x=this.calcArcPoints(q),y=x[0],w=x[1],A=x[2],B=x[3],p=this.calcArcPoints(C),z=p[0],m=p[1],D=p[2],v=p[3],"M"+y+","+w+("A"+q+","+q+",0,"+this.is_long+",0,"+A+","+B)+("L"+D+","+v)+("A"+C+","+C+",0,"+this.is_long+",1,"+z+","+m)+"Z"},i.prototype.calcArc=function(m){var v,p,q,o,u;return u=this.calcArcPoints(m),v=u[0],q=u[1],p=u[2],o=u[3],"M"+v+","+q+("A"+m+","+m+",0,"+this.is_long+",0,"+p+","+o)},i.prototype.render=function(){var m=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return m.fire("hover",m.index)},function(){return m.fire("click",m.index)})},i.prototype.drawDonutArc=function(m,n){return this.raphael.path(m).attr({stroke:n,"stroke-width":2,opacity:0})},i.prototype.drawDonutSegment=function(m,s,p,q,o){return this.raphael.path(m).attr({fill:s,stroke:p,"stroke-width":3}).hover(q).click(o)},i.prototype.select=function(){if(!this.selected){return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0}},i.prototype.deselect=function(){if(this.selected){return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1}},i}(k.EventEmitter)}).call(this);