(function(a){var b=window.Think;b||a.error("Movesay基础配置没有正确加载！");b.parse_url=function(d){var c=d.match(/^(?:([a-z]+):\/\/)?([\w-]+(?:\.[\w-]+)+)?(?::(\d+))?([\w-\/]+)?(?:\?((?:\w+=[^#&=\/]*)?(?:&\w+=[^#&=\/]*)*))?(?:#([\w-]+))?$/i);c||a.error("url格式不正确！");return{scheme:c[1],host:c[2],port:c[3],path:c[4],query:c[5],fragment:c[6]}};b.parse_str=function(d){var e=d.split("&"),f={},c;for(val in e){c=e[val].split("=");f[c[0]]=c[1]}return f};b.parse_name=function(c,d){if(d){c.replace(/_([a-z])/g,function(e,f){return f.toUpperCase()});c.replace(/[a-z]/,function(e){return e.toUpperCase()})}else{c=c.replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()});if(0===c.indexOf("_")){c=c.substr(1)}}return c};b.U=function(h,i,g){var c=this.parse_url(h),e=[],d={},f;c.path||a.error("url格式错误！");h=c.path;if(0===h.indexOf("/")){this.MODEL[0]==0&&a.error("该URL模式不支持使用路由!("+h+")");if("/"==h.substr(-1)){h=h.substr(0,h.length-1)}h=("/"==this.DEEP)?h.substr(1):h.substr(1).replace(/\//g,this.DEEP);h="/"+h}else{e=h.split("/");e=[e.pop(),e.pop(),e.pop()].reverse();e[1]||a.error("Movesay.U("+h+")没有指定控制器");if(e[0]){d[this.VAR[0]]=this.MODEL[1]?e[0].toLowerCase():e[0]}d[this.VAR[1]]=this.MODEL[1]?this.parse_name(e[1]):e[1];d[this.VAR[2]]=e[2].toLowerCase();h="?"+a.param(d)}if(typeof i==="string"){i=this.parse_str(i)}else{if(!a.isPlainObject(i)){i={}}}c.query&&a.extend(i,this.parse_str(c.query));if(i){h+="&"+a.param(i)}if(0!=this.MODEL[0]){h=h.replace("?"+(e[0]?this.VAR[0]:this.VAR[1])+"=","/").replace("&"+this.VAR[1]+"=",this.DEEP).replace("&"+this.VAR[2]+"=",this.DEEP).replace(/(\w+=&)|(&?\w+=$)/g,"").replace(/[&=]/g,this.DEEP);if(false!==g){g=g||this.MODEL[2].split("|")[0];if(g){h+="."+g}}}h=this.APP+h;return h};b.setValue=function(f,h){var c=f.substr(0,1),e,d=0,g;if(h===""){return}if("#"===c||"."===c){e=a(f)}else{e=a("[name='"+f+"']")}if(e.eq(0).is(":radio")){e.filter("[value='"+h+"']").each(function(){this.checked=true})}else{if(e.eq(0).is(":checkbox")){if(!a.isArray(h)){g=new Array();g[0]=h}else{g=h}for(d=0,len=g.length;d<len;d++){e.filter("[value='"+g[d]+"']").each(function(){this.checked=true})}}else{e.val(h)}}}})(jQuery);